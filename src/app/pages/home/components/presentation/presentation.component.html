<section class="p-4" id="table-positions">
  <h2 class="text-7xl font-bold mb-4 text-white flex justify-center items-center"
      style="font-family: Niconne, sans-serif, sans-serif;">Tabla de Posiciones</h2>

  <!-- Selects en una fila -->
  <div class="flex flex-wrap gap-4 mb-6 justify-center">
    <!-- Seleccionar Fecha -->
    <div>
      <label class="block mb-1 font-semibold text-white">Fecha</label>
      <select class="border p-2 rounded" [(ngModel)]="selectedDate" (change)="onFechaChange($event)">
        <option value="">-- Selecciona fecha --</option>
        <option *ngFor="let f of fechas" [value]="f.nombre">{{ f.nombre }}</option>
      </select>
    </div>

    <!-- Seleccionar Nivel -->
    <div *ngIf="fechaSeleccionada">
      <label class="block mb-1 font-semibold text-white">Nivel educativo</label>
      <select class="border p-2 rounded" [(ngModel)]="selectedLevel" (change)="onNivelChange($event)">
        <option value="">-- Selecciona nivel --</option>
        <option *ngFor="let n of fechaSeleccionada.niveles" [value]="n.nombre">{{ n.nombre }}</option>
      </select>
    </div>

    <!-- Seleccionar Deporte -->
    <div *ngIf="nivelSeleccionado">
      <label class="block mb-1 font-semibold text-white">Deporte</label>
      <select class="border p-2 rounded" [(ngModel)]="selectedDeport" (change)="onDeporteChange($event)">
        <option value="">-- Selecciona deporte --</option>
        <option *ngFor="let d of nivelSeleccionado.deportes" [value]="d.nombre">{{ d.nombre }}</option>
      </select>
    </div>
  </div>

  <!-- Mostrar todos los grupos de ese deporte -->
  <ng-container *ngIf="deporteSeleccionado">
    <h3 class="text-lg font-semibold mb-4 text-white text-center">
      Resultados: {{ fechaSeleccionada?.nombre }} - {{ nivelSeleccionado?.nombre }} - {{ deporteSeleccionado?.nombre }}
    </h3>

    <div class="grid justify-center justify-items-center gap-6"
         [ngClass]="{
       'grid-cols-1': deporteSeleccionado.grupos.length === 1,
       'grid-cols-2': deporteSeleccionado.grupos.length === 2,
       'grid-cols-3': deporteSeleccionado.grupos.length === 3,
       'grid-cols-4': deporteSeleccionado.grupos.length >= 4
     }">
      <app-standings-table
        [ngClass]="{
      'max-w-lg w-full': deporteSeleccionado.grupos.length === 1,
      'w-full': deporteSeleccionado.grupos.length > 1
    }"
        *ngFor="let grupo of deporteSeleccionado.grupos"
        [titulo]="fechaSeleccionada?.nombre + ' | ' + nivelSeleccionado?.nombre + ' | ' + deporteSeleccionado?.nombre"
        [nivel]="nivelSeleccionado!.nombre"
        [grupo]="grupo.nombre"
        [typeTeam]="grupo.typeTeam"
        [fecha]="fechaSeleccionada?.nombre!"
        [equipos]="grupo?.equipos!">
      </app-standings-table>
    </div>

  </ng-container>
</section>
