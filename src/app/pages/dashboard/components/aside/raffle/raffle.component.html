<div class="raffle-container">
  <h1 class="title">ğŸ‰ PRIMERA GRAN BICICLETEADA KUSKA MUYUSUNCHIS 2025 ğŸš´â€â™‚ï¸</h1>
  <div class="info-message">
    <p>Gracias por tu participaciÃ³n en esta fiesta que celebra la solidaridad y la actividad fÃ­sica.</p>
    <p>Para validar tu participaciÃ³n presenta la numeraciÃ³n de tu bicicleta.</p>
  </div>
  <!-- PartÃ­culas flotantes en estado idle -->
  <div *ngIf="phase === 'idle'" class="floating-particles">
    <div *ngFor="let particle of floatingParticles" class="particle"
         [style.left]="particle.x + '%'"
         [style.animation-delay]="particle.delay + 's'"
         [style.background]="particle.color">
    </div>

    <div class="idle-message">
      <h3>ğŸ² Presiona "Iniciar Sorteo" ğŸ²</h3>
      <p>La emociÃ³n estÃ¡ por comenzar...</p>
    </div>
  </div>
  <div class="content-wrapper">
    <!-- Video en el lado izquierdo -->
    <div class="video-container">
      <video
        #videoPlayer
        src="https://taqe.cusco.gob.pe/publico/web/campeonato/Video.mp4"
        type="video/mp4"
        autoplay
        loop
        muted
        playsinline
        class="video-player">
      </video>
    </div>

    <!-- AnimaciÃ³n de bolas en el lado derecho -->
    <div class="animation-container">
      <div class="ball-zone" [ngClass]="phase">
        <div
          *ngFor="let participant of visibleBalls"
          class="ball"
          [ngClass]="{
            spin: phase === 'spin',
            explode: phase === 'explode',
            'move-to-center': phase === 'moveToCenter',
            winner: phase === 'winner',
            'orbit-1': participant.orbit === 1,
            'orbit-2': participant.orbit === 2,
            'orbit-3': participant.orbit === 3,
            'orbit-4': participant.orbit === 4,
            'orbit-5': participant.orbit === 5,
            'orbit-6': participant.orbit === 6,
            'orbit-7': participant.orbit === 7,
          }"
          [style.--angle.deg]="participant.angle"
          [style.--ball-color]="participant.color"
          (click)="phase === 'winner' ? showWinnerInfo() : null"
        >
          <div *ngIf="phase === 'winner'" class="trophy">ğŸ†</div>
        </div>
      </div>
    </div>
  </div>

  <!-- Botones en la parte inferior de todo -->
  <div class="buttons-container">
    <div class="buttons">
      <button (click)="startRaffle()" [disabled]="isRunning">ğŸ² Iniciar Sorteo</button>
      <button (click)="reset()">ğŸ”„ Reiniciar</button>
    </div>

    <!-- Imagen del auspiciador al lado derecho -->
    <img src="auspiciadores/cusco.png" alt="Gobierno Regional Cusco" class="auspiciador-img">
  </div>

  <!-- Canvas para el confeti -->
  <canvas id="confetti-canvas"></canvas>

  <!-- Modal del Ganador -->
  <div *ngIf="showWinnerModal" class="modal-overlay" (click)="closeWinnerModal()">
    <div class="modal-content" (click)="$event.stopPropagation()">
      <div class="modal-header">
        <h2>ğŸ‰ Â¡FELICIDADES! ğŸ‰</h2>
        <button class="close-btn" (click)="closeWinnerModal()">Ã—</button>
      </div>
      <div class="modal-body">
        <div class="winner-info">
          <div class="winner-ball">ğŸ†</div>
          <div class="winner-details">
            <p>David Jesus Quispe Chaco</p>
            <p>76767676</p>
            <p>TRAMO KILLA</p>
          </div>
        </div>
        <div class="confetti-message">ğŸŠ Â¡GANADOR! ğŸŠ</div>
      </div>
      <div class="modal-footer">
        <button class="celebrate-btn" (click)="closeWinnerModal()">Cerrar CelebraciÃ³n</button>
      </div>
    </div>
  </div>
</div>
