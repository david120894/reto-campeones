<div class="p-4 sm:ml-64">
  <div class="pt-12 px-8">
    <div class="container mx-auto space-y-6">

      <!-- Cards de métricas -->
      <div class="grid pt-6 grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
        <!-- Total Inscritos -->
        <div class="bg-gradient-to-r from-green-500 to-lime-500 rounded-xl p-6 shadow-lg text-white transform hover:scale-105 transition duration-300">
          <div class="flex items-center gap-4">
            <i class="fas fa-users text-4xl"></i>
            <div>
              <h2 class="text-lg font-semibold">Total Inscritos</h2>
              <p class="text-4xl font-bold text-white">{{ totalInscriptions }}</p>
            </div>
          </div>
        </div>

        <!-- Mujeres -->
        <div class="bg-gradient-to-r from-purple-500 to-pink-500 rounded-xl p-6 shadow-lg text-white cursor-pointer hover:opacity-90 transform hover:scale-105 transition duration-300"
             (click)="filterFemale()">
          <div class="flex items-center gap-4">
            <i class="fas fa-person-dress text-4xl"></i>
            <div>
              <h2 class="text-lg font-semibold">Total Mujeres</h2>
              <p class="text-4xl font-bold">{{ totalFemales }}</p>
            </div>
          </div>
        </div>

        <!-- Varones -->
        <div class="bg-gradient-to-r from-blue-500 to-teal-500 rounded-xl p-6 shadow-lg text-white cursor-pointer hover:opacity-90 transform hover:scale-105 transition duration-300"
             (click)="filterMale()">
          <div class="flex items-center gap-4">
            <i class="fas fa-person text-4xl"></i>
            <div>
              <h2 class="text-lg font-semibold">Total Varones</h2>
              <p class="text-4xl font-bold">{{ totalMales }}</p>
            </div>
          </div>
        </div>

        <!-- Menores -->
        <div class="bg-gradient-to-r from-yellow-500 to-amber-500 rounded-xl p-6 shadow-lg text-white cursor-pointer hover:opacity-90 transform hover:scale-105 transition duration-300"
             (click)="filterMinor()">
          <div class="flex items-center gap-4">
            <i class="fas fa-child text-4xl"></i>
            <div>
              <h2 class="text-lg font-semibold">Total Menores</h2>
              <p class="text-4xl font-bold">{{ totalMinor }}</p>
            </div>
          </div>
        </div>
      </div>

      <!-- Filtros -->
      <div class="bg-white rounded-xl shadow-md p-4 flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4">
        <!-- Buscar -->
        <input
          type="text"
          [(ngModel)]="searchQuery"
          (ngModelChange)="onSearchChange()"
          placeholder="Buscar..."
          class="w-full lg:w-72 p-2 border rounded-lg text-gray-900 bg-gray-50 focus:outline-none focus:ring-2 focus:ring-[#740938]"
        />

        <!-- Filtros por género -->
        <div class="flex flex-wrap gap-3 items-center">
          <div (click)="filterMale()">
            <input class="peer hidden" value="male" name="gender" id="male" type="radio"/>
            <label for="male"
                   class="flex items-center gap-2 px-3 py-2 rounded-lg border-2 border-gray-300 bg-gray-50 text-gray-600 cursor-pointer
                          peer-checked:border-blue-500 peer-checked:text-blue-600 peer-checked:shadow">
              <i class="fas fa-person text-lg text-blue-500"></i> Varones
            </label>
          </div>

          <div (click)="filterFemale()">
            <input class="peer hidden" value="female" name="gender" id="female" type="radio"/>
            <label for="female"
                   class="flex items-center gap-2 px-3 py-2 rounded-lg border-2 border-gray-300 bg-gray-50 text-gray-600 cursor-pointer
                          peer-checked:border-pink-500 peer-checked:text-pink-600 peer-checked:shadow">
              <i class="fas fa-person-dress text-lg text-pink-500"></i> Mujeres
            </label>
          </div>

          <div (click)="filterAll()">
            <input class="peer hidden" value="all" name="gender" id="all" type="radio"/>
            <label for="all"
                   class="flex items-center gap-2 px-3 py-2 rounded-lg border-2 border-gray-300 bg-gray-50 text-gray-600 cursor-pointer
                          peer-checked:border-purple-500 peer-checked:text-purple-600 peer-checked:shadow">
              <i class="fas fa-users text-lg text-purple-500"></i> Todos
            </label>
          </div>

          <!-- Exportar -->
          <button
            (click)="exportExcel()"
            class="flex items-center gap-2 bg-green-600 hover:bg-green-700 text-white font-semibold py-2 px-4 rounded-lg shadow-md transition duration-300">
            <i class="fas fa-file-excel"></i> Exportar Excel
          </button>

          <!-- Categorías -->
          <div class="flex items-center gap-2">
            <span class="text-gray-600">Categoría:</span>
            <ng-select
              [items]="categories"
              [(ngModel)]="searchQueryCategory"
              (change)="onSearchChangeFilter()"
              placeholder="Seleccione categoría"
              class="min-w-[200px]">
            </ng-select>
          </div>
        </div>
      </div>

      <!-- Tabla -->
      <div class="overflow-x-auto rounded-lg shadow-md border border-gray-200">
        <table class="w-full text-sm text-left text-gray-700">
          <thead class="text-xs uppercase bg-[#740938] text-white sticky top-0">
          <tr>
            <th class="px-6 py-3">Nombre</th>
            <th class="px-6 py-3">DNI</th>
            <th class="px-6 py-3">Email</th>
            <th class="px-6 py-3">Categoría</th>
            <th class="px-6 py-3">Talla</th>
            <th class="px-6 py-3">Distrito</th>
            <th class="px-6 py-3 text-center">Teléfono</th>
            <th class="px-6 py-3 text-center">Permiso</th>
          </tr>
          </thead>
          <tbody>
          <tr *ngFor="let p of paginatedReservations; let i = index"
              class="bg-white border-b hover:bg-gray-50 transition">
            <td class="px-6 py-4 font-medium text-gray-900">{{ p.name }} {{ p.lastName }}</td>
            <td class="px-6 py-4">{{ p.dni }}</td>
            <td class="px-6 py-4">{{ p.email }}</td>
            <td class="px-6 py-4">{{ p.category }}</td>
            <td class="px-6 py-4">{{ p.shirtSize }}</td>
            <td class="px-6 py-4">{{ p.district }}</td>
            <td class="px-6 py-4 text-center">
              <div class="flex flex-col">
                <span>{{ p.phone }}</span>
                <span class="text-xs text-gray-500">{{ p.emergencyContact }}</span>
              </div>
            </td>
            <td class="px-6 py-4 text-center">
              <button *ngIf="p.age < 18" (click)="downloadFile(p.dni)" class="hover:scale-110 transition">
                <i class="fas fa-file text-blue-500 text-2xl"></i>
              </button>
            </td>
          </tr>
          </tbody>
        </table>
      </div>
      <!-- Paginación -->
      <div class="flex justify-between items-center mt-6">
        <button (click)="changePage(currentPage - 1)" [disabled]="currentPage === 1"
                class="bg-gray-200 hover:bg-gray-300 text-gray-700 font-semibold py-2 px-4 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed">
          ← Anterior
        </button>
        <span class="text-gray-600">Página <strong>{{ currentPage }}</strong> de {{ totalPages }}</span>
        <button (click)="changePage(currentPage + 1)" [disabled]="currentPage === totalPages"
                class="bg-gray-200 hover:bg-gray-300 text-gray-700 font-semibold py-2 px-4 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed">
          Siguiente →
        </button>
      </div>

    </div>
  </div>
</div>
